unit UFrmCampeonatos;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.Grids, Vcl.DBGrids,
  Data.DB, Datasnap.DBClient, System.Generics.Collections,Ucampeonato;

type
  TfrmCadastroCampeonatos = class(TForm)
    edtNome: TEdit;
    edtAno: TEdit;
    DBGrid1: TDBGrid;
    Nome: TLabel;
    Ano: TLabel;
    Button1: TButton;
    Button2: TButton;
    DS: TDataSource;
    CDS: TClientDataSet;
    CDSID: TIntegerField;
    CDSNome: TStringField;
    CDSAno: TStringField;
    procedure FormCreate(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    variavelSequencial : Integer;
    listaCampeonatos : TObjectList<TCampeonatos>;
    { Private declarations }
  public

  end;

var
  frmCadastroCampeonatos: TfrmCadastroCampeonatos;

implementation

{$R *.dfm}

procedure TfrmCadastroCampeonatos.Button1Click(Sender: TObject);
var
campeonato : TCampeonatos;

begin
  if(edtNome.Text = '')then
  begin
    MessageDlg('Nome não informado. Verifique.',mtInformation,[mbOK],0);
  end
  else
  begin

    variavelSequencial:= variavelSequencial+1;
    campeonato:= TCampeonatos.Create;

    campeonato.id:= variavelSequencial;
    campeonato.nome:= edtNome.Text;
    campeonato.ano:= StrToInt(edtAno.Text);

    CDS.Append;

    CDS.FieldByName('id').AsInteger := campeonato.id;
    cds.FieldByName('nome').AsString := campeonato.nome;
    cds.FieldByName('ano').AsInteger := campeonato.ano;

    CDS.Post;

    listaCampeonatos.Add(campeonato);

  end;
end;

procedure TfrmCadastroCampeonatos.FormCreate(Sender: TObject);
begin
  CDS.CreateDataSet;
  listaCampeonatos:=TObjectList<TCampeonatos>.Create;
end;

procedure TfrmCadastroCampeonatos.FormDestroy(Sender: TObject);
begin
  FreeAndNil(listaCampeonatos);
end;

end.
